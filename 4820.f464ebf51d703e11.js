"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4820],{4820:(Yt,Ge,c)=>{c.d(Ge,{zQ:()=>$e});var u=c(5879),de=c(8645),b=c(2096),he=c(5592),fe=c(2459),Be=c(3019),_=c(3093),A=c(4664),$=c(7398),We=c(4552);class Ue extends de.x{constructor(e=1/0,n=1/0,r=We.l){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;n||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=n.now();let l=0;for(let a=1;a<r.length&&r[a]<=s;a+=2)l=a;l&&r.splice(0,l+1)}}}var je=c(3020);function pe(t,e,n){let r,o=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:n}=t):r=null!=t?t:1/0,(0,je.B)({connector:()=>new Ue(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var ze=c(1374),Ve=c(4674);function ge(t,e){return(0,Ve.m)(e)?(0,A.w)(()=>t,e):(0,A.w)(()=>t)}var K=c(5137),Xe=c(2181),S=c(543),k=c(6304),Ye=c(6814),T=(c(8726),c(3182),c(5861)),G=c(534),me=c(4537),y=c(9058),Qe=c(7879);const B=new Map,Ae={activated:!1,tokenObservers:[]},Je={initialized:!1,enabled:!1};function d(t){return B.get(t)||Object.assign({},Ae)}function D(){return Je}const W="https://content-firebaseappcheck.googleapis.com/v1",nt="exchangeDebugToken",Te={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ot{constructor(e,n,r,o,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,T.Z)(function*(){n.stop();try{n.pending=new y.BH,yield function it(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new y.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const f=new y.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function U(t){if(!d(t).activated)throw f.create("use-before-activation",{appName:t.name})}function x(t,e){return z.apply(this,arguments)}function z(){return(z=(0,T.Z)(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const p=yield o.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}const i={method:"POST",body:JSON.stringify(e),headers:r};let s,l;try{s=yield fetch(t,i)}catch(p){throw f.create("fetch-network-error",{originalErrorMessage:null==p?void 0:p.message})}if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});try{l=yield s.json()}catch(p){throw f.create("fetch-parse-error",{originalErrorMessage:null==p?void 0:p.message})}const a=l.ttl.match(/^([\d.]+)(s)$/);if(!a||!a[2]||isNaN(Number(a[1])))throw f.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const g=1e3*Number(a[1]),C=Date.now();return{token:l.token,expireTimeMillis:C+g,issuedAtTimeMillis:C}})).apply(this,arguments)}function Ee(t,e){const{projectId:n,appId:r,apiKey:o}=t.options;return{url:`${W}/projects/${n}/apps/${r}:${nt}?key=${o}`,body:{debug_token:e}}}const ct="firebase-app-check-database",ut=1,P="firebase-app-check-store";let F=null;function V(){return(V=(0,T.Z)(function*(t,e){const r=(yield function ve(){return F||(F=new Promise((t,e)=>{try{const n=indexedDB.open(ct,ut);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var o;e(f.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(P,{keyPath:"compositeKey"})}}catch(n){e(f.create("storage-open",{originalErrorMessage:null==n?void 0:n.message}))}}),F)}()).transaction(P,"readwrite"),i=r.objectStore(P).put({compositeKey:t,value:e});return new Promise((s,l)=>{i.onsuccess=a=>{s()},r.onerror=a=>{var g;l(f.create("storage-set",{originalErrorMessage:null===(g=a.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const R=new Qe.Yd("@firebase/app-check");function Z(t,e){return(0,y.hl)()?function ht(t,e){return function Ce(t,e){return V.apply(this,arguments)}(function Pe(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{R.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function J(){return D().enabled}function q(){return ee.apply(this,arguments)}function ee(){return(ee=(0,T.Z)(function*(){const t=D();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Tt={error:"UNKNOWN_ERROR"};function Et(t){return y.US.encodeString(JSON.stringify(t),!1)}function N(t){return te.apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(t,e=!1){const n=t.app;U(n);const r=d(n);let i,o=r.token;if(o&&!v(o)&&(r.token=void 0,o=void 0),!o){const a=yield r.cachedTokenPromise;a&&(v(a)?o=a:yield Z(n,void 0))}if(!e&&o&&v(o))return{token:o.token};let l,s=!1;if(J()){r.exchangeTokenPromise||(r.exchangeTokenPromise=x(Ee(n,yield q()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const a=yield r.exchangeTokenPromise;return yield Z(n,a),r.token=a,{token:a.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),o=yield d(n).exchangeTokenPromise}catch(a){"appCheck/throttled"===a.code?R.warn(a.message):R.error(a),i=a}return o?i?l=v(o)?{token:o.token,internalError:i}:be(i):(l={token:o.token},r.token=o,yield Z(n,o)):l=be(i),s&&function Ie(t,e){const n=d(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,l),l})).apply(this,arguments)}function Re(t){return ne.apply(this,arguments)}function ne(){return(ne=(0,T.Z)(function*(t){const e=t.app;U(e);const{provider:n}=d(e);if(J()){const r=yield q(),{token:o}=yield x(Ee(e,r),t.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function oe(t,e){const n=d(t),r=n.tokenObservers.filter(o=>o.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function we(t){const{app:e}=t,n=d(e);let r=n.tokenRefresher;r||(r=function kt(t){const{app:e}=t;return new ot((0,T.Z)(function*(){let r;if(r=d(e).token?yield N(t,!0):yield N(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=d(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Te.RETRIAL_MIN_WAIT,Te.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function v(t){return t.expireTimeMillis-Date.now()>0}function be(t){return{token:Et(Tt),error:t}}class vt{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=d(this.app);for(const n of e)oe(this.app,n.next);return Promise.resolve()}}const Ne="app-check-internal";!function Ft(){(0,G._registerComponent)(new me.wA("app-check",t=>function Ct(t,e){return new vt(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Ne).initialize()})),(0,G._registerComponent)(new me.wA(Ne,t=>function yt(t){return{getToken:e=>N(t,e),getLimitedUseToken:()=>Re(t),addTokenListener:e=>function re(t,e,n,r){const{app:o}=t,i=d(o);if(i.tokenObservers=[...i.tokenObservers,{next:n,error:r,type:e}],i.token&&v(i.token)){const l=i.token;Promise.resolve().then(()=>{n({token:l.token}),we(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>we(t))}(t,"INTERNAL",e),removeTokenListener:e=>oe(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)("@firebase/app-check","0.8.0")}();class He{constructor(){return(0,S.vb)("app-check")}}typeof window<"u"&&window,c(7142);const Gt=new u.OlP("angularfire2.auth.use-emulator"),Bt=new u.OlP("angularfire2.auth.settings"),Wt=new u.OlP("angularfire2.auth.tenant-id"),Ut=new u.OlP("angularfire2.auth.langugage-code"),jt=new u.OlP("angularfire2.auth.use-device-language"),zt=new u.OlP("angularfire.auth.persistence");let $e=(()=>{class t{constructor(n,r,o,i,s,l,a,g,C,p,Xt,gn){const Ke=new de.x,w=(0,b.of)(void 0).pipe((0,_.Q)(s.outsideAngular),(0,A.w)(()=>i.runOutsideAngular(()=>c.e(5967).then(c.bind(c,5967)))),(0,$.U)(()=>(0,k.on)(n,i,r)),(0,$.U)(I=>((t,e,n,r,o,i,s,l)=>(0,k.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const a=e.runOutsideAngular(()=>t.auth());if(n&&a.useEmulator(...n),r&&(a.tenantId=r),a.languageCode=o,i&&a.useDeviceLanguage(),s)for(const[g,C]of Object.entries(s))a.settings[g]=C;return l&&a.setPersistence(l),a},[n,r,o,i,s,l]))(I,i,l,g,C,p,a,Xt)),pe({bufferSize:1,refCount:!1}));if((0,Ye.PM)(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,b.of)(null);else{w.pipe((0,ze.P)()).subscribe();const H=w.pipe((0,A.w)(h=>h.getRedirectResult().then(m=>m,()=>null)),S.iC,pe({bufferSize:1,refCount:!1})),ce=w.pipe((0,A.w)(h=>new he.y(m=>({unsubscribe:i.runOutsideAngular(()=>h.onAuthStateChanged(E=>m.next(E),E=>m.error(E),()=>m.complete()))})))),ue=w.pipe((0,A.w)(h=>new he.y(m=>({unsubscribe:i.runOutsideAngular(()=>h.onIdTokenChanged(E=>m.next(E),E=>m.error(E),()=>m.complete()))}))));this.authState=H.pipe(ge(ce),(0,K.R)(s.outsideAngular),(0,_.Q)(s.insideAngular)),this.user=H.pipe(ge(ue),(0,K.R)(s.outsideAngular),(0,_.Q)(s.insideAngular)),this.idToken=this.user.pipe((0,A.w)(h=>h?(0,fe.D)(h.getIdToken()):(0,b.of)(null))),this.idTokenResult=this.user.pipe((0,A.w)(h=>h?(0,fe.D)(h.getIdTokenResult()):(0,b.of)(null))),this.credential=(0,Be.T)(H,Ke,this.authState.pipe((0,Xe.h)(h=>!h))).pipe((0,$.U)(h=>null!=h&&h.user?h:null),(0,K.R)(s.outsideAngular),(0,_.Q)(s.insideAngular))}return(0,k.pX)(this,w,i,{spy:{apply:(I,H,ce)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&ce.then(ue=>Ke.next(ue))}}})}}return t.\u0275fac=function(n){return new(n||t)(u.LFG(k.Dh),u.LFG(k.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(S.HU),u.LFG(Gt,8),u.LFG(Bt,8),u.LFG(Wt,8),u.LFG(Ut,8),u.LFG(jt,8),u.LFG(zt,8),u.LFG(He,8))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})()}}]);